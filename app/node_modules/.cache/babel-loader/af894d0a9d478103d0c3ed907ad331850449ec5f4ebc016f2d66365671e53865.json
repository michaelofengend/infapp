{"ast":null,"code":"var _s = $RefreshSig$();\nimport { useEffect, useState } from 'react';\nimport axios from 'axios';\nexport default function useBookSearch(query, pageNumber) {\n  _s();\n  const [loading, setLoading] = useState(true);\n  const [error, setError] = useState(false);\n  const [books, setBooks] = useState([]);\n  const [hasMore, setHasMore] = useState(false);\n  useEffect(() => {\n    setBooks([]);\n  }, [query]);\n  useEffect(() => {\n    setLoading(true);\n    setError(false);\n    let cancel;\n    axios({\n      method: 'GET',\n      url: 'http://openlibrary.org/search.json',\n      params: {\n        q: query,\n        page: pageNumber\n      },\n      cancelToken: new axios.CancelToken(c => cancel = c)\n    }).then(res => {\n      setBooks(prevBooks => {\n        return [...new Set([...prevBooks, ...res.data.docs.map(b => b.title)])];\n      });\n      setHasMore(res.data.docs.length > 0);\n      setLoading(false);\n    }).catch(e => {\n      if (axios.isCancel(e)) return;\n      setError(true);\n    });\n    return () => cancel();\n  }, [query, pageNumber]);\n  return {\n    loading,\n    error,\n    books,\n    hasMore\n  };\n}\n_s(useBookSearch, \"ZrgSCruHI183llBUUEUcEU7ZUkA=\");","map":{"version":3,"names":["useEffect","useState","axios","useBookSearch","query","pageNumber","loading","setLoading","error","setError","books","setBooks","hasMore","setHasMore","cancel","method","url","params","q","page","cancelToken","CancelToken","c","then","res","prevBooks","Set","data","docs","map","b","title","length","catch","e","isCancel"],"sources":["/Users/michaelofengenden/Desktop/Infapp/app/src/useBookSearch.js"],"sourcesContent":["import { useEffect, useState } from 'react'\nimport axios from 'axios'\n\nexport default function useBookSearch(query, pageNumber) {\n  const [loading, setLoading] = useState(true)\n  const [error, setError] = useState(false)\n  const [books, setBooks] = useState([])\n  const [hasMore, setHasMore] = useState(false)\n\n  useEffect(() => {\n    setBooks([])\n  }, [query])\n\n  useEffect(() => {\n    setLoading(true)\n    setError(false)\n    let cancel\n    axios({\n      method: 'GET',\n      url: 'http://openlibrary.org/search.json',\n      params: { q: query, page: pageNumber },\n      cancelToken: new axios.CancelToken(c => cancel = c)\n    }).then(res => {\n      setBooks(prevBooks => {\n        return [...new Set([...prevBooks, ...res.data.docs.map(b => b.title)])]\n      })\n      setHasMore(res.data.docs.length > 0)\n      setLoading(false)\n    }).catch(e => {\n      if (axios.isCancel(e)) return\n      setError(true)\n    })\n    return () => cancel()\n  }, [query, pageNumber])\n\n  return { loading, error, books, hasMore }\n}"],"mappings":";AAAA,SAASA,SAAS,EAAEC,QAAQ,QAAQ,OAAO;AAC3C,OAAOC,KAAK,MAAM,OAAO;AAEzB,eAAe,SAASC,aAAa,CAACC,KAAK,EAAEC,UAAU,EAAE;EAAA;EACvD,MAAM,CAACC,OAAO,EAAEC,UAAU,CAAC,GAAGN,QAAQ,CAAC,IAAI,CAAC;EAC5C,MAAM,CAACO,KAAK,EAAEC,QAAQ,CAAC,GAAGR,QAAQ,CAAC,KAAK,CAAC;EACzC,MAAM,CAACS,KAAK,EAAEC,QAAQ,CAAC,GAAGV,QAAQ,CAAC,EAAE,CAAC;EACtC,MAAM,CAACW,OAAO,EAAEC,UAAU,CAAC,GAAGZ,QAAQ,CAAC,KAAK,CAAC;EAE7CD,SAAS,CAAC,MAAM;IACdW,QAAQ,CAAC,EAAE,CAAC;EACd,CAAC,EAAE,CAACP,KAAK,CAAC,CAAC;EAEXJ,SAAS,CAAC,MAAM;IACdO,UAAU,CAAC,IAAI,CAAC;IAChBE,QAAQ,CAAC,KAAK,CAAC;IACf,IAAIK,MAAM;IACVZ,KAAK,CAAC;MACJa,MAAM,EAAE,KAAK;MACbC,GAAG,EAAE,oCAAoC;MACzCC,MAAM,EAAE;QAAEC,CAAC,EAAEd,KAAK;QAAEe,IAAI,EAAEd;MAAW,CAAC;MACtCe,WAAW,EAAE,IAAIlB,KAAK,CAACmB,WAAW,CAACC,CAAC,IAAIR,MAAM,GAAGQ,CAAC;IACpD,CAAC,CAAC,CAACC,IAAI,CAACC,GAAG,IAAI;MACbb,QAAQ,CAACc,SAAS,IAAI;QACpB,OAAO,CAAC,GAAG,IAAIC,GAAG,CAAC,CAAC,GAAGD,SAAS,EAAE,GAAGD,GAAG,CAACG,IAAI,CAACC,IAAI,CAACC,GAAG,CAACC,CAAC,IAAIA,CAAC,CAACC,KAAK,CAAC,CAAC,CAAC,CAAC;MACzE,CAAC,CAAC;MACFlB,UAAU,CAACW,GAAG,CAACG,IAAI,CAACC,IAAI,CAACI,MAAM,GAAG,CAAC,CAAC;MACpCzB,UAAU,CAAC,KAAK,CAAC;IACnB,CAAC,CAAC,CAAC0B,KAAK,CAACC,CAAC,IAAI;MACZ,IAAIhC,KAAK,CAACiC,QAAQ,CAACD,CAAC,CAAC,EAAE;MACvBzB,QAAQ,CAAC,IAAI,CAAC;IAChB,CAAC,CAAC;IACF,OAAO,MAAMK,MAAM,EAAE;EACvB,CAAC,EAAE,CAACV,KAAK,EAAEC,UAAU,CAAC,CAAC;EAEvB,OAAO;IAAEC,OAAO;IAAEE,KAAK;IAAEE,KAAK;IAAEE;EAAQ,CAAC;AAC3C;AAAC,GAjCuBT,aAAa"},"metadata":{},"sourceType":"module","externalDependencies":[]}